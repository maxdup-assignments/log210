<h1>Gestion des commandes</h1>

<table class="table">
  <tr>
    <th style="width:100px">status</th>
    <th>commande</th>
    <th>requested delivery time</th>
    <th></th>
  </tr>
  <tr ng-repeat="commande in filtered(commandes, ['ready', 'preparing', 'pending'])">
    <td>
      <span ng-show="commande.status == 'pending'" class="label label-danger">
        En attente</span>
      <span ng-show="commande.status == 'preparing'" class="label label-warning">
        En préparation</span>
      <span ng-show="commande.status == 'ready'" class="label label-success">
        Prêt</span>
    </td>
    <td>
      <div ng-repeat="item in commande.details.commande">
        {{item.qty}}
        {{item.name}}
      </div>
    </td>
    <td>{{commande.details.requestedTime | date:'MM/dd/yyyy - hh:mm'}}</td>
    <td>
      <button class="btn btn-xs btn-info" style="float:right"
              ng-click="update_status(commande, 'preparing')"
              ng-show="commande.status == 'pending'">
        commencer préparation</button>
      <button class="btn btn-xs btn-info" style="float:right"
              ng-click="update_status(commande, 'ready')"
              ng-show="commande.status == 'preparing'">
        terminer préparation
      </button>
    </td>
  <tr>
</div>
